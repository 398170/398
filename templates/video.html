{% extends 'layout.html' %}
{% block content %}
<h2>{{ video.title }}</h2>
<p>{{ video.description }}</p>

<video width="640" height="360" controls>
    <source src="{{ url_for('static', filename='hls/' + video.id + '/index.m3u8') }}" type="application/x-mpegURL">
    お使いのブラウザは動画タグをサポートしていません。
</video>

<hr>
<h3>コメント</h3>
<ul>
    {% for comment in comments %}
        <li><strong>{{ comment.username }}</strong>: {{ comment.text }}</li>
    {% endfor %}
</ul>

{% if 'username' in session %}
<form method="POST" action="{{ url_for('comment', video_id=video.id) }}">
    <textarea name="comment" required></textarea><br>
    <input type="submit" value="コメントを投稿">
</form>
{% else %}
<p>コメントを投稿するには<a href="{{ url_for('login') }}">ログイン</a>してください。</p>
{% endif %}
{% endblock %}
