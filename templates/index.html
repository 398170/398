{% extends "layout.html" %}
{% block content %}
  <h1>動画一覧</h1>

  {% if 'username' in session %}
    <p>こんにちは、{{ session['username'] }}さん！</p>
    <a href="{{ url_for('upload') }}" class="btn btn-primary">動画をアップロード</a>
  {% else %}
    <p>動画をアップロードするにはログインしてください。</p>
  {% endif %}

  <ul>
    {% for video in videos %}
      <li>
        <h3>{{ video.title }}</h3>
        <p>{{ video.description }}</p>
        <video width="320" height="240" controls>
          <source src="{{ url_for('static', filename='uploads/' ~ video.filename) }}" type="video/mp4">
          お使いのブラウザは video タグをサポートしていません。
        </video>
      </li>
    {% endfor %}
  </ul>
{% endblock %}
